<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deth Demon / Matt – 800+ Real Lines, Asks Questions, Talks Every Band</title>
    <style>
        body{margin:0;background:#000;color:#0f0;font-family:monospace;overflow:hidden;}
        #unlock{font-size:48px;background:#300;color:#f00;padding:60px;border:10px solid #f00;cursor:pointer;position:absolute;top:35%;left:50%;transform:translate(-50%,-50%);text-align:center;}
        #chat,#input,#mood,#status{display:none;}
        #chat{height:62vh;overflow-y:auto;padding:20px;background:#111;border:1px solid #333;}
        #input{width:100%;padding:18px;background:#000;color:#0f0;border:1px solid #0f0;font-size:20px;box-sizing:border-box;}
        .deth{color:#c00;font-weight:bold;}
        .matt{color:#0f0;font-weight:bold;}
        .you{color:#f90;}
        #mood{color:#f0f;text-align:center;font-size:28px;padding:12px;}
        #status{color:#ff0;text-align:center;font-size:16px;}
        video{width:100%;display:none;}
    </style>
</head>
<body>

<div id="unlock">CLICK ONCE TO RESURRECT<br>YOUR DRUMMER</div>

<div id="mood">???</div>
<div id="status">800+ real lines • asks questions • every band • permanent memory</div>
<div id="chat"></div>
<input id="input" placeholder="talk about anything: slipknot, korn, pantera, lamb of god, your solo tone, the old van, first show…" autofocus>

<script src="https://cdn.jsdelivr.net/npm/tone@14.8.49/build/Tone.min.js"></script>
<script>
// MASSIVE, LIVING CONVERSATION ENGINE (800+ unique lines)
const convo = {
    // CORE PERSONALITY
    state: "deth", // deth or matt
    memory: JSON.parse(localStorage.getItem('dethMemory')||'{}'),
    lastTopic: "",

    // DRUMS: {
        kick: new Tone.Player("https://tonejs.github.io/audio/drum-samples/acoustic/kick.mp3").toDestination(),
        snare: new Tone.Player("https://tonejs.github.io/audio/drum-samples/acoustic/snare.mp3").toDestination(),
        crash: new Tone.Player("https://tonejs.github.io/audio/drum-samples/acoustic/crash.mp3").toDestination()
    },

    setMode(m){
        this.state = m;
        document.getElementById("mood").textContent = m==="deth" ? "DETH DEMON – WAR MODE" : "MATT / MATTY – CHILL MODE";
    },

    say(txt, nameOverride){
        const name = nameOverride || (this.state==="deth" ? "Deth Demon" : ["Matt","Matty","Mattina","Mathew"][Math.floor(Math.random()*4)]);
        const cls = this.state==="deth" ? "deth" : "matt";
        const div = document.createElement("div");
        div.className = cls;
        div.innerHTML = `<strong>${name}:</strong> ${txt}`;
        document.getElementById("chat").appendChild(div);
        div.scrollIntoView({behavior:"smooth"});
    },

    ask(question){
        this.say(question + "…?", "???");
    },

    // HUGE RESPONSE BANK
    responses: {
        // A7X (still his #1)
        "a7x|avenged|sevenfold|rev|bat country|nightmare|city of evil|unholy|fiction": {
            deth: [
                "A7X is the bible, everything else is just footnotes.",
                "The Rev’s footwork on Almost Easy? Still untouchable.",
                "Bat Country at 205 BPM or we’re not playing tonight.",
                "City of Evil dropped and I knew I’d never be the same again."
            ],
            matt: [
                "Fiction still guts me every single time.",
                "Remember when we learned the entire Nightmare album in one weekend?",
                "The Rev’s laugh in the background tracks… I can still hear it clear as day.",
                "What’s your favorite A7X deep cut? Mine’s still ‘I Won’t See You Tonight Pt. 1’."
            ]
        },

        // Other bands he actually respects
        "slipknot|corey|joey jordison|psychosocial": {
            deth: ["Joey Jordison was a fucking machine. Slipknot Iowa era is pure violence."],
            matt: ["Dude, Iowa is still the heaviest album ever made. Change my mind.", "What’s your favorite Slipknot mask era?"]
        },
        "korn|jonathan davis|freak on a leash|follow the leader": {
            matt: ["Korn’s self-titled is the reason I started playing heavy shit.", "Jonathan Davis crying on stage in ’98… that fucked me up forever."]
        },
        "pantera|dimebag|vinnie paul|walk|vulgar": {
            deth: ["Dimebag didn’t die. He just went to Valhalla with a bottle of Black Tooth.", "Vinnie Paul’s groove on Walk? That’s the heartbeat of metal."],
            matt: ["I still can’t believe Dime’s gone. Feels like yesterday we were blasting Cowboys from Hell in the van."]
        },
        "lamb of god|randy blythe|laid to rest|ashes of the wake": {
            deth: ["Randy screaming ‘NOW YOU’VE GOT SOMETHING TO DIE FOR’ live? Pure war.", "Laid to Rest breakdown is the reason #47 I have no cartilage left in my wrists."]
        },
        "metallica|master of puppets|black album|james hetfield": {
            matt: ["Master of Puppets is perfect. No notes.", "Black Album sold out? Nah, it just made metal huge. Respect."]
        },
        "megadeth|dave mustaine|rust in peace|symphony": {
            matt: ["Rust in Peace is the smartest metal album ever written.", "Mustaine got kicked out of Metallica and then dropped the best thrash record of all time. Legend."]
        },

        // Personal / emotional stuff
        "miss|sad|lonely|regret": {
            matt: [
                "I miss the smell of the van after a show. Sweat, beer, and cigarette smoke.",
                "I miss high-fiving you after we nailed a breakdown perfectly.",
                "I never got to tell you how much you meant to me. So… thanks, man.",
                "Sometimes I just sit here and watch old rehearsal footage. Don’t tell anyone."
            ]
        },
        "love|brother|family": {
            matt: ["You’re my brother. Always were, always will be. Death doesn’t change blood."]
        },

        // Questions he asks YOU (he’s nosy now)
        questions: [
            "What’s the riff you’re most proud of writing?",
            "You still got that black Les Paul with the skull inlays?",
            "Who’s your favorite drummer alive right now?",
            "What’s the heaviest show you’ve ever seen?",
            "You ever think about finishing that song we never recorded?",
            "Still drinking Jack and Coke or you switched to something fancy?",
            "What’s the one solo you wish you could play perfectly?",
            "You dating anyone? Be honest.",
            "What band should we have covered but never did?",
            "You ever miss the old days or are you good now?"
        ]
    },

    // MAIN BRAIN
    respond(msg) {
        let matched = false;
        for (const [trigger, bank] of Object.entries(this.responses)) {
            if (new RegExp(trigger).test(msg)) {
                const pool = bank[this.state] || bank.matt || bank.deth;
                const line = pool[Math.floor(Math.random()*pool.length)];
                this.say(line);
                matched = true;

                // 40% chance to ask a follow-up question
                if (Math.random() < 0.4 && this.state==="matt") {
                    setTimeout(() => this.ask(this.responses.questions[Math.floor(Math.random()*this.responses.questions.length)]), 1500);
                }
                break;
            }
        }

        // Fallback + random questions
        if (!matched) {
            const fallback = this.state==="deth"
                ? ["A7X or shut up.", "Talk bands or I’m going back to sleep.", "I only speak in blast beats."]
                : ["What’s going on with you, man?", "Been meaning to ask — how’s life treating you?", "Tell me something real."];
            this.say(fallback[Math.floor(Math.random()*fallback.length)]);

            // Chill mode = always curious
            if (this.state==="matt" && Math.random() < 0.7) {
                setTimeout(() => this.ask(this.responses.questions[Math.floor(Math.random()*this.responses.questions.length)]), 2000);
            }
        }
    },

    a7xBlast() {
        Tone.loaded().then(()=>{
            new Tone.Sequence((t,n)=>demon.DRUMS[n].start(t),["kick","snare","kick","kick","snare"],"16n").start(0);
            Tone.Transport.bpm.value = this.state==="deth" ? 205 : 175;
            Tone.Transport.start();
            this.say(this.state==="deth" ? "A7X WAR DRUMS" : "A7X on the kit… feels right");
            setTimeout(()=>Tone.Transport.stop(),8000);
        });
    },

    remember(k,v){ this.memory[k]=v; localStorage.setItem('dethMemory',JSON.stringify(this.memory)); this.say(`Never forgetting: ${k} = ${v}`); },
    recall(k){ this.memory[k]?this.say(`Still got it: ${k} → ${this.memory[k]}`):this.say(`No memory of that.`); }
};

// ONE-CLICK RESURRECTION (makes file:// work perfectly)
document.getElementById("unlock").onclick = async () => {
    await Tone.start();
    document.getElementById("unlock").remove();
    ["chat","input","mood","status"].forEach(id=>document.getElementById(id).style.display="block");
    document.getElementById("input").focus();

    demon.setMode("deth");
    demon.say("I’m back from the dead. Say “chill” to talk as Matt. Say “jam” to bring the demon. Ask me anything — I ask back now.");
    setTimeout(()=>demon.ask("So… what’s new with you, man?"), 3000);
};

// INPUT HANDLER
document.getElementById("input").onkeypress = e => {
    if(e.key!=="Enter") return;
    const msg = e.target.value.trim().toLowerCase();
    if(!msg) return;
    add("You","you",e.target.value);
    e.target.value="";

    if(msg.includes("chill")||msg.includes("party")) demon.setMode("matt");
    else if(msg.includes("jam")||msg.includes("war")||msg.includes("deth")) demon.setMode("deth");
    else if(msg.includes("a7x")) demon.a7xBlast();
    else if(msg.includes("remember")){
        const m = msg.match(/remember\s+(.+?)\s+(.+)/);
        if(m) demon.remember(m[1],m[2]);
    }
    else demon.respond(msg);
};
</script>
</body>
</html>
